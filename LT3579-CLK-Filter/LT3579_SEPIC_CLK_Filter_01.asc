Version 4
SHEET 1 1708 756
WIRE 176 0 32 0
WIRE 416 0 256 0
WIRE 576 0 416 0
WIRE 32 64 32 0
WIRE 416 64 416 0
WIRE 576 64 576 0
WIRE 32 208 32 144
WIRE 416 208 416 144
WIRE 416 208 32 208
WIRE 576 208 576 128
WIRE 576 208 416 208
WIRE 32 240 32 208
FLAG 32 240 0
SYMBOL voltage 32 48 R0
WINDOW 3 -475 100 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 3 0 12n 8n {t_ON} 1.428u)
SYMATTR InstName V1
SYMBOL res 272 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 432 160 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 5k
SYMBOL cap 560 64 R0
SYMATTR InstName C1
SYMATTR Value 68.2n
TEXT 16 328 Left 2 !.tran 0 10m 0 0.01
TEXT 360 336 Left 2 !.step param t_ON 0.28571u 0.999u 0.05u
TEXT 368 392 Left 2 ;Test filter from MATLAB code. Filter out the higher harmonics of pulse and keep the DC componant for MCU to read.
TEXT 376 424 Left 2 ;F_c = 700 Hz, Gain = 1/3
